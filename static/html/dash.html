<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd"
    >
<html lang="en">
<head>
    <title>Tea Dash!</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/lib/raphael/raphael-min.js"></script>
    <script type="text/javascript" src="/static/js/lib/raphael/g.raphael-min.js"></script>
    <script type="text/javascript" src="/static/js/lib/raphael/g.pie-min.js"></script>
    <script>
        $.getJSON('http://localhost:3000/test', function(data) {
            var fields = [];
            var labels = [];
            $.each(data, function(idx,value){
                labels.push('%%.%% - ' + value[0]);
                fields.push(value[1]);
            });
            
            
            
            var r = Raphael('pie_graph');
            r.g.txtattr.font = "12px 'Fontin Sans', Fontin-Sans, sans-serif";
            r.g.text(200, 10, "Tea Consumption").attr({"font-size": 20});
            
            var pie = r.g.piechart(
                200,
                200,
                160,
                fields,
                {
                    legend: labels,
                    legendpos: "east"
                }
            );
            
            pie.hover(function () {
                this.sector.stop();
                this.sector.scale(1.1, 1.1, this.cx, this.cy);
                if (this.label) {
                    this.label[0].stop();
                    this.label[0].scale(1.5);
                    this.label[1].attr({"font-weight": 800});
                }
            }, function () {
                this.sector.animate({scale: [1, 1, this.cx, this.cy]}, 500, "bounce");
                if (this.label) {
                    this.label[0].animate({scale: 1}, 500, "bounce");
                    this.label[1].attr({"font-weight": 400});
                }
            });
            
        });
    </script>   
    <link rel="stylesheet" href="/static/css/blueprint/src/typography.css" type="text/css"/>
    <link rel="stylesheet" href="/static/css/blueprint/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="/static/css/blueprint/print.css" type="text/css" media="print">	
    <!--[if lt IE 8]><link rel="stylesheet" href="/static/css/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
    <link rel="stylesheet" type="text/css" href="/static/css/main.css" />
</head>
<body>
    <div id="container">
        <div class="span-2">&nbsp;</div>
        <div class="span-22 last"><h1>Tea Dash</h1></div>
        <hr/>
        <div class="span-2">&nbsp;</div>
        <h3 id="today" class="span-22 last"></h3>
        <hr class="space" />
        <div class="span-2">&nbsp;</div>
        <div class="span-22 last">      
            <div id="pie_graph" class="span-16"></div>
            <div class="span-6 last">
                <ul id="stats">
                    <li>
                        Name: <span class="name"></span>
                        Count: <span class="count"></span>
                    </li>
                </li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
